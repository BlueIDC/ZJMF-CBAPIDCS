<link rel="stylesheet" href="/plugins/server/common_cloud/template/admin/css/host_config.css">
<script src="https://apps.bdimg.com/libs/jquery/2.1.4/jquery.min.js"></script>

<div class="common_config" v-cloak v-if="configArr.length >0">
  <t-form :data="configForm" :rules="configRules" ref="userInfo" label-align="top" @submit="submitConfig">
    <p class="com-tit"><span>详细信息</span></p>
    <div class="config-item">
      <t-form-item label="授权ID：">
        <t-input v-model="authInfo.authorize_id"></t-input>
      </t-form-item>
      <t-form-item label="域名：">
        <t-input v-model="authInfo.domain"></t-input>
      </t-form-item>
      <t-form-item label="IP：">
        <t-input v-model="authInfo.ip"></t-input>
      </t-form-item>
      <t-form-item label="授权码：">
        <t-input v-model="authInfo.license"></t-input>
      </t-form-item>
      <!-- <t-form-item label="服务到期时间：" name="due_time">
        <t-date-picker mode="date" enable-time-picker v-model="service_due_time" @change="changeActive" />
      </t-form-item> -->
      <template v-for="item in configArr">
        <!-- 下拉单选 -->
        <t-form-item :label="item.option_name" :name="item.id" v-if="item.option_type === 'select' || item.option_type === 'radio'">
          <t-select v-model="configForm[item.id]" :placeholder="lang.select">
            <t-option v-for="(el,ind) in item.sub" :key="ind" :label="el.name" :value="el.value">
            </t-option>
          </t-select>
        </t-form-item>
        <!-- 数量类型 -->
        <t-form-item :label="item.option_name" :name="item.id" v-if="item.option_type === 'quantity_range' || item.option_type === 'quantity'">
          <t-input-number style="width: 100%;" v-model="configForm[item.id]" :min="item.qty_min" :max="item.qty_max" theme="normal" :placeholder="lang.input"></t-input-number>
        </t-form-item>
      </template>
    </div>

    <template v-if="sonHost.id">
      <p class="com-tit" style="margin-top: 25px;"><span>{{sonHost.product_name}}-{{sonHost.id}}</span></p>
      <div class="config-item">
        <t-form-item :label="lang.buy_amount" name="first_payment_amount">
          <t-input v-model="sonHost.first_payment_amount" :placeholder="lang.buy_amount">
          </t-input>
        </t-form-item>
        <t-form-item :label="lang.renew_amount" name="renew_amount">
          <t-input v-model="sonHost.renew_amount" :placeholder="lang.renew_amount"></t-input>
        </t-form-item>
        <t-form-item :label="lang.billing_way">
          <t-select v-model="sonHost.billing_cycle" :popup-props="popupProps">
            <t-option v-for="item in cycleList" :value="item.value" :label="item.label" :key="item.value">
            </t-option>
          </t-select>
        </t-form-item>
        <t-form-item :label="lang.billing_cycle">
          <t-input v-model="sonHost.billing_cycle_name" disabled></t-input>
        </t-form-item>
        <t-form-item :label="lang.open_time" name="active_time">
          <t-date-picker mode="date" enable-time-picker v-model="active_time" @change="changeActive2" />
        </t-form-item>
        <t-form-item label="服务到期时间" name="due_time">
          <t-date-picker mode="date" enable-time-picker v-model="due_time" @change="changeActive3" />
        </t-form-item>
        <template v-for="item in sonConfigArr">
          <!-- 下拉单选 -->
          <t-form-item :label="item.option_name" :name="item.id" v-if="item.option_type === 'select' || item.option_type === 'radio'">
            <t-select v-model="sonConfigForm[item.id]" :placeholder="lang.select">
              <t-option v-for="(el,ind) in item.sub" :key="ind" :label="el.name" :value="el.value">
              </t-option>
            </t-select>
          </t-form-item>
          <!-- 数量类型 -->
          <t-form-item :label="item.option_name" :name="item.id" v-if="item.option_type === 'quantity_range' || item.option_type === 'quantity'">
            <t-input-number style="width: 100%;" v-model="sonConfigForm[item.id]" :min="item.qty_min" :max="item.qty_max" theme="normal" :placeholder="lang.input"></t-input-number>
          </t-form-item>
        </template>
      </div>
    </template>
    <div class="com-f-btn">
      <t-button theme="primary" type="submit" :loading="isLoading">保存明细</t-button>
    </div>
  </t-form>
</div>

<script src="/plugins/server/common_cloud/template/admin/api/common_config.js"></script>

<script src="/plugins/server/common_cloud/template/admin/js/host_config.js"></script>